window.apl=window.apl||{},window.apl.urlHelper=function(){function i(t){this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.hash=t.hash,this.search=t.search,this.searchObject=null,this.origin=t.origin,this.domElement=t}function t(){this.canonicalUrl=null,this.linkCollection={}}return i.prototype.getSearchObject=function(){if(null===this.searchObject){this.searchObject={};for(var t=this.search.substring(1).split("&"),i=0;i<t.length;i++)if(t[i].length){var n=t[i].split("=");this.parseQueryPair(this.searchObject,decodeURIComponent(n[0]),1<n.length?decodeURIComponent(n[1]):null)}}return this.searchObject},i.prototype.parseQueryPair=function(t,i,n){var e=i,r=!1,o=i.indexOf("[");if(-1<o){var a=i.indexOf("]",o);-1<a&&(e=i.slice(0,o),r=i.substring(o+1,a)+i.substring(a+1))}if(!e)for(e=0;t.hasOwnProperty(e);e++);t.hasOwnProperty(e)||(t[e]={}),!1!==r?this.parseQueryPair(t[e],r,n):t[e]=n},i.prototype.hasSearchParam=function(t){return this.getSearchObject().hasOwnProperty(t)},i.prototype.getSearchParam=function(t){return this.hasQueryParam(t)?this.getSearchObject()[t]:void 0},t.prototype.getLink=function(t){return t=t||window.location.toString(),this.linkCollection.hasOwnProperty(t)||(this.linkCollection[t]=new i(this.createLinkDomElement(t))),this.linkCollection[t]},t.prototype.getCanonicalLink=function(){if(!this.canonicalUrl){for(var t=document.getElementsByTagName("link"),i=0;i<t.length;i++)if(t[i].hasAttribute("rel")&&"canonical"===t[i].getAttribute("rel")&&t[i].hasAttribute("href")){this.canonicalUrl=t[i].getAttribute("href").trim();break}this.canonicalUrl||(this.canonicalUrl=window.location.toString())}return this.getLink(this.canonicalUrl)},t.prototype.createLinkDomElement=function(t){t=t||window.location.toString();var i=document.createElement("div");return i.innerHTML="<a></a>",i.firstChild.href=t,i.innerHTML=i.innerHTML,i.firstChild},t.prototype.getCountry=function(){var t=this.getCanonicalLink().pathname.toLocaleLowerCase().substring(1).split("/",2)[0];return-1!==["exciting","cruise"].indexOf(t)?{uri:t,name:t}:"object"==typeof window.apl.countryList[t]&&{uri:t,name:window.apl.countryList[t].name,id:window.apl.countryList[t].id}},new t}();