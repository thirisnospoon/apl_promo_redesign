!function(h){var n="readmore",d={speed:100,maxHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,sectionCSS:"display: block; width: 100%;",startOpen:!1,expandedClass:"readmore-js-expanded",collapsedClass:"readmore-js-collapsed",beforeToggle:function(){},afterToggle:function(){}},r=!1;function i(e,t){if(this.element=e,this.options=h.extend({},d,t),h(this.element).data("max-height",this.options.maxHeight),h(this.element).data("height-margin",this.options.heightMargin),delete this.options.maxHeight,this.options.embedCSS&&!r){var s=".readmore-js-toggle, .readmore-js-section { "+this.options.sectionCSS+" } .readmore-js-section { overflow: hidden; }";i=document,a=s,(o=i.createElement("style")).type="text/css",o.styleSheet?o.styleSheet.cssText=a:o.appendChild(i.createTextNode(a)),i.getElementsByTagName("head")[0].appendChild(o),r=!0}var i,a,o;this._defaults=d,this._name=n,this.init()}i.prototype={init:function(){var a=this;h(this.element).each(function(){var t=h(this),e=t.css("max-height").replace(/[^-\d\.]/g,"")>t.data("max-height")?t.css("max-height").replace(/[^-\d\.]/g,""):t.data("max-height"),s=t.data("height-margin");if("none"!=t.css("max-height")&&t.css("max-height","none"),a.setBoxHeight(t),t.outerHeight(!0)<=e+s)return!0;t.addClass("readmore-js-section "+a.options.collapsedClass).data("collapsedHeight",e);var i=a.options.startOpen?a.options.lessLink:a.options.moreLink;t.after(h(i).on("click",function(e){a.toggleSlider(this,t,e)}).addClass("readmore-js-toggle")),a.options.startOpen||t.css({height:e})}),h(window).on("resize",function(e){a.resizeBoxes()})},toggleSlider:function(e,t,s){s.preventDefault();var i=this,a=newLink=sectionClass="",o=!1,n=h(t).data("collapsedHeight");h(t).height()<=n?(a=h(t).data("expandedHeight")+"px",newLink="lessLink",o=!0,sectionClass=i.options.expandedClass):(a=n,newLink="moreLink",sectionClass=i.options.collapsedClass),i.options.beforeToggle(e,t,o),h(t).animate({height:a},{duration:i.options.speed,complete:function(){i.options.afterToggle(e,t,o),h(e).replaceWith(h(i.options[newLink]).on("click",function(e){i.toggleSlider(this,t,e)}).addClass("readmore-js-toggle")),h(this).removeClass(i.options.collapsedClass+" "+i.options.expandedClass).addClass(sectionClass)}})},setBoxHeight:function(e){var t=e.clone().css({height:"auto",width:e.width(),overflow:"hidden"}).insertAfter(e),s=t.outerHeight(!0);t.remove(),e.data("expandedHeight",s)},resizeBoxes:function(){var t=this;h(".readmore-js-section").each(function(){var e=h(this);t.setBoxHeight(e),(e.height()>e.data("expandedHeight")||e.hasClass(t.options.expandedClass)&&e.height()<e.data("expandedHeight"))&&e.css("height",e.data("expandedHeight"))})},destroy:function(){var t=this;h(this.element).each(function(){var e=h(this);e.removeClass("readmore-js-section "+t.options.collapsedClass+" "+t.options.expandedClass).css({"max-height":"",height:"auto"}).next(".readmore-js-toggle").remove(),e.removeData()})}},h.fn[n]=function(t){var s=arguments;return void 0===t||"object"==typeof t?this.each(function(){if(h.data(this,"plugin_"+n)){var e=h.data(this,"plugin_"+n);e.destroy.apply(e)}h.data(this,"plugin_"+n,new i(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var e=h.data(this,"plugin_"+n);e instanceof i&&"function"==typeof e[t]&&e[t].apply(e,Array.prototype.slice.call(s,1))}):void 0}}(jQuery);